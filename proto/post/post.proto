syntax = "proto3";

import "google/protobuf/timestamp.proto";

option go_package = "github.com/bpremika/post";

// LendingPost message representing the structure of the LendingPost object
message LendingPost {
    uint64 id = 1;           
    string item_name = 2;     
    string description = 3;   
    double price = 4;         
    bool active_status = 5;   
    string image_url = 6;     
    string owner_id = 7;      
    google.protobuf.Timestamp updated_at = 8;  
}
  
// Request message for creating a new LendingPost
message CreateLendingPostRequest {
    string item_name = 1;     
    string description = 2;   
    double price = 3;         
    bool active_status = 4;   
    string image_url = 5;     
    string owner_id = 6;     
}

// Response message for the CreateLendingPost service
message CreateLendingPostResponse {
    uint64 id = 1;            
    string message = 2;       
}

// Request message for fetching LendingPost details
message GetLendingPostDetailRequest {
    uint64 id = 1;
}

// Request message for searching LendingPost
message SearchLendingPostRequest {
    string search_string = 1;   // Snake_case for field names is recommended in proto3
}

// Response message for a list of LendingPosts
message LendingPostList {
    repeated LendingPost posts = 1;   // Use `repeated` for arrays of LendingPost
}

// LendingPostService definition
service LendingPostService {
    rpc CreateLendingPost(CreateLendingPostRequest) returns (CreateLendingPostResponse) {}
    rpc GetLendingPostDetail(GetLendingPostDetailRequest) returns (LendingPost) {}
    rpc SearchLendingPost(SearchLendingPostRequest) returns (LendingPostList) {}  // Wrapped repeated response
}



// LendingPost message representing the structure of the BorrowingPost object
message BorrowingPost {
    uint64 id = 1;
    string description = 2;     // Required field
    bool active_status = 3;     // Required field, boolean
    repeated LendingPost item_list = 4; // List of BorrowingPost
    string owner_id = 5;        // Required field
    int64 timestamp = 6;        // Required field, using int64 for timestamps           
    string created_at = 7;    
    string updated_at = 8;    
    string deleted_at = 9;   
  }
  
// Request message for creating a new BorrowingPost
message CreateBorrowingPostRequest {   
    string description = 1;   // Optional: Description of the item
    bool active_status = 2;   // Required: Active status of the post
    string owner_id = 3;      // Required: ID of the owner (can be a UUID)
}

// Response message for the CreateBorrowingPost service
message CreateBorrowingPostResponse {
    uint64 id = 1;            // The autogenerated ID of the created post
    string message = 2;       // A success message or error details
}

message GetBorrowingPostDetailRequest {
    uint64 id = 1;
}

message GetBorrowingPostDetailResponse {
    uint64 id = 1;           
    string description = 2;     // Required field
    bool active_status = 3;     // Required field, boolean
    repeated LendingPost item_list = 4; // List of BorrowingPost
    string owner_id = 5; 
    string updated_at = 6;         
}

message SearchBorrowingPostRequest {
    string searchString = 1;
}

message SearchBorrowingPostResponse{
    repeated BorrowingPost borrowing_post = 1;
}

message GetBorrowingPostByIdRequest{
    uint64 id = 1;
}

message GetBorrowingPostByIdResponse{
    string description = 1;
    bool active_status = 2;
}



service BorrowingPostService {
// RPC method to create a new BorrowingPost
    rpc CreateBorrowingPost(CreateBorrowingPostRequest) returns (CreateBorrowingPostResponse) {}
    rpc GetBorrowingPostDetail(GetBorrowingPostDetailRequest) returns (GetBorrowingPostDetailResponse) {}
}